{"ast":null,"code":"var __jsx = React.createElement;\nimport { Button } from \"react-bootstrap\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setUsers, makeAndPushVC } from \"../store\";\nimport axios from \"axios\";\n\nclass ActiaveEndorserButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.dispatch = props.dispatch;\n    this.session = props.session;\n    this.click = this.click.bind(this);\n    this.state = {\n      active: props.active\n    };\n  }\n\n  componentDidMount() {}\n\n  click() {\n    console.log(`clicked email ${this.props.email} and status was ${this.props.active}`);\n    const theUsers = this.props.users;\n    axios.post(\"/activate\", {\n      email: this.props.email\n    }).then(resp => {\n      if (resp.data === \"OK\") {\n        let newUsers = theUsers;\n        console.log(newUsers);\n        newUsers.forEach(element => {\n          if (element.email === this.props.email) {\n            element.status = !element.status;\n          }\n        });\n        this.props.setTheUsers(newUsers); // this.props.active= !this.props.active\n\n        this.setState({\n          active: !this.state.active\n        });\n      } else {\n        console.log(`error occured response is `);\n        console.log(resp);\n      }\n    });\n  }\n\n  render() {\n    if (this.state.active) {\n      return __jsx(Button, {\n        variant: \"primary\",\n        onClick: this.click\n      }, \"Deactivate\");\n    } else {\n      return __jsx(Button, {\n        variant: \"primary\",\n        onClick: this.click\n      }, \"Activate\");\n    }\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    status: state.sessionStatus\n  };\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    sendVC: (url, userSelection, vcType, uuid, isMobile) => {\n      dispatch(makeAndPushVC(url, userSelection, vcType, uuid, isMobile));\n    },\n    setTheUsers: users => {\n      dispatch(setUsers(users));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActiaveEndorserButton);","map":null,"metadata":{},"sourceType":"module"}