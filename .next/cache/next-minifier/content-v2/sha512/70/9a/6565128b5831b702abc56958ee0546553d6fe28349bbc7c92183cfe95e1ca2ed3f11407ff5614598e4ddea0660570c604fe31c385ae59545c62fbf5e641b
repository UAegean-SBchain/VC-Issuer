{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{\"9FFw\":function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/vc/issue/e1\",function(){return s(\"BEX2\")}])},BEX2:function(e,t,s){\"use strict\";s.r(t);var a=s(\"vJKn\"),r=s.n(a),i=s(\"rg98\"),n=s(\"H+61\"),o=s(\"UlJF\"),c=s(\"+Css\"),u=s(\"7LId\"),p=s(\"VIvw\"),l=s(\"iHvq\"),d=s(\"cpVT\"),h=s(\"q1tI\"),b=s.n(h),f=(s(\"vDqi\"),s(\"BXF7\")),m=s(\"5Yp1\"),D=s(\"/MKj\"),v=s(\"3Z9Z\"),S=s(\"JI6e\"),O=s(\"cWnB\"),R=s(\"6xyR\"),j=s(\"7vrA\"),g=s(\"jCsy\"),U=s(\"uY6F\"),y=s(\"GTdM\"),A=s(\"trcu\"),E=s(\"aBEL\"),q=(s(\"HALo\"),s(\"dhJC\"),s(\"d/v1\")),w=s(\"pJVQ\"),I=(s(\"VmPI\"),s(\"ZGBi\"),s(\"ADg1\"),s(\"M4Ey\"),s(\"O6Ht\"),b.a.createElement),T=function(e,t,s){return I(\"div\",{className:\"form-group row\"},I(\"label\",{htmlFor:e,className:\"col-sm-2 col-form-label\"},t),I(\"div\",{className:\"col-sm-10\"},I(q.a,{name:e,component:\"input\",type:\"text\",className:\"form-control\"})))},N=function(e){var t=e.handleSubmit,s=e.userError;return console.log(\"there is an error \"+s),s?I(\"div\",{style:{marginTop:\"2rem\"}},\"  \",s,\" \"):I(\"form\",{onSubmit:t,style:{marginTop:\"5rem\",marginBottom:\"5rem\"}},I(\"div\",{className:\"container\"},I(\"h4\",{className:\"row\"},\"\\u03a0\\u03c1\\u03bf\\u03c3\\u03c9\\u03c0\\u03b9\\u03ba\\u03ac \\u03a3\\u03c4\\u03bf\\u03b9\\u03c7\\u03b5\\u03af\\u03b1\"),T(\"name\",\"\\u038c\\u03bd\\u03bf\\u03bc\\u03b1:\"),T(\"surname\",\"\\u0395\\u03c0\\u03ce\\u03bd\\u03c5\\u03bc\\u03bf:\"),T(\"dateOfBirth\",\"\\u0397\\u03bc\\u03b5\\u03c1\\u03bf\\u03bc\\u03b7\\u03bd\\u03af\\u03b1 \\u0393\\u03ad\\u03bd\\u03bd\\u03b7\\u03c3\\u03b7\\u03c2 (\\u03c0.\\u03c7. 01/01/77):\")),I(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"\\u03a5\\u03c0\\u03bf\\u03b2\\u03bf\\u03bb\\u03ae\"))},x=N=Object(w.a)({form:\"aade\"})(N),F=s(\"WYw3\"),_=b.a.createElement;function k(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;s=Reflect.construct(a,arguments,r)}else s=a.apply(this,arguments);return Object(p.a)(this,s)}}s(\"6ivx\").transport;var B=function(e){Object(u.a)(s,e);var t=k(s);function s(e){var a;return Object(n.a)(this,s),a=t.call(this,e),Object(d.a)(Object(c.a)(a),\"submit\",(function(e){console.log(e);var t=a.props.sealSession?\"?session=\".concat(a.props.sealSession,\"&name=\").concat(e.name,\"&surname=\").concat(e.surname,\"&dateOfBirth=\").concat(encodeURI(e.dateOfBirth)):\"\";window.location.href=\"\".concat(a.props.baseUrl,\"/e1/getData\").concat(t)})),a.dispatch=e.dispatch,a.isFetching=e.isFetching,a.sessionData=e.sessionData,a.proceedWithTaxisAuth=a.proceedWithTaxisAuth.bind(Object(c.a)(a)),a.hasRequiredAttributes=null!==e.sessionData&&void 0!==e.sessionData&&void 0!==e.sessionData.e1,a}return Object(o.a)(s,[{key:\"componentDidMount\",value:function(){if(this.props.sessionData&&this.props.sessionData.e1){var e=[this.props.sessionData.e1];this.props.setE1ToSelection(e)}this.props.DID||(this.props.sealSession?this.props.makeConnectionRequest(this.props.sealSession,this.props.baseUrl,Object(E.a)()):this.props.startSessionAndDidAuth(this.props.baseUrl,Object(E.a)()))}},{key:\"proceedWithTaxisAuth\",value:function(){var e=this.props.sealSession?\"?session=\".concat(this.props.sealSession):\"\";window.location.href=\"\"===this.props.baseUrl?\"/e1/getData\".concat(e):\"\".concat(this.props.baseUrl,\"e1/getData\").concat(e)}},{key:\"render\",value:function(){var e=this.props.DID?this.hasRequiredAttributes?2:1:0,t=[{title:\"\\u03a3\\u03c5\\u03bd\\u03b4\\u03ad\\u03c3\\u03c4\\u03b5 \\u03c4\\u03bf \\u03ba\\u03b9\\u03bd\\u03b7\\u03c4\\u03cc \\u03c3\\u03b1\\u03c2\"},{title:\"\\u0391\\u03bd\\u03b1\\u03ba\\u03c4\\u03ae\\u03c3\\u03c4\\u03b5 \\u03c4\\u03b1 \\u03b4\\u03b5\\u03b4\\u03bf\\u03bc\\u03ad\\u03bd\\u03b1 \\u03c3\\u03b1\\u03c2\"},{title:\"\\u0388\\u03ba\\u03b4\\u03bf\\u03c3\\u03b7 \\u0397\\u03bb\\u03b5\\u03ba\\u03c4\\u03c1\\u03bf\\u03bd\\u03b9\\u03ba\\u03ae\\u03c2 \\u03a4\\u03b1\\u03c5\\u03c4\\u03cc\\u03c4\\u03b7\\u03c4\\u03b1\\u03c2\"}];if(this.props.qrData&&Object(E.a)()&&!this.props.DID)return _(m.a,null,_(v.a,null,_(S.a,null,_(g.a,{steps:t,activeNum:e}))),_(F.a,{baseUrl:this.props.baseUrl,qrData:this.props.qrData,DID:this.props.DID,uuid:this.props.uuid,serverSessionId:this.props.uuid,sealSession:this.props.uuid}));var s=this.hasRequiredAttributes?_(O.a,{variant:\"primary\",disabled:!0},\"AADE login\"):_(O.a,{onClick:this.proceedWithTaxisAuth},\"\\u03a3\\u03cd\\u03bd\\u03b4\\u03b5\\u03c3\\u03b7 \\u03bc\\u03ad\\u03c3\\u03c9 \\u0391\\u0391\\u0394\\u0395\"),a=_(y.a,{hasRequiredAttributes:this.hasRequiredAttributes,baseUrl:this.props.baseUrl,userSelection:this.props.userSelection,uuid:this.props.sealSession,vcType:\"E1\"}),r=_(R.a,{className:\"text-center\",style:{marginTop:\"2rem\"}},_(R.a.Header,null,\"Issue a Verifiable Credential containing financial details from AADE\"),_(R.a.Body,null,_(R.a.Title,null,this.hasRequiredAttributes?\"\\u0397 \\u03ad\\u03ba\\u03b4\\u03bf\\u03c3\\u03b7 \\u03c4\\u03b7\\u03c2 \\u0397\\u03bb\\u03b5\\u03ba\\u03c4\\u03c1\\u03bf\\u03bd\\u03b9\\u03ba\\u03ae\\u03c2 \\u03c3\\u03b1\\u03c2 \\u03a4\\u03b1\\u03c5\\u03c4\\u03cc\\u03c4\\u03b7\\u03c4\\u03b1\\u03c2 \\u03b5\\u03af\\u03bd\\u03b1\\u03b9 \\u03ad\\u03c4\\u03bf\\u03b9\\u03bc\\u03b7!\":\"\\u03a0\\u03b1\\u03c1\\u03b1\\u03ba\\u03b1\\u03bb\\u03ce \\u03c4\\u03b1\\u03c5\\u03c4\\u03bf\\u03c0\\u03bf\\u03b9\\u03b7\\u03b8\\u03b5\\u03af\\u03c4\\u03b5 \\u03c3\\u03c4\\u03b9\\u03c2 \\u03b1\\u03c0\\u03b1\\u03b9\\u03c4\\u03bf\\u03cd\\u03bc\\u03b5\\u03bd\\u03b5\\u03c2 \\u03c0\\u03b7\\u03b3\\u03ad\\u03c2\"),_(R.a.Text,null,'\\u039c\\u03bf\\u03bb\\u03b9\\u03c2 \\u03c4\\u03b1\\u03c5\\u03c4\\u03bf\\u03c0\\u03bf\\u03b9\\u03b7\\u03b8\\u03b5\\u03af\\u03c4\\u03b5 \\u03bc\\u03b5 \\u03c4\\u03b9\\u03c2 \\u03b5\\u03be\\u03bf\\u03c5\\u03c3\\u03b9\\u03bf\\u03b4\\u03bf\\u03c4\\u03b7\\u03bc\\u03ad\\u03bd\\u03b5\\u03c2 \\u03c0\\u03b7\\u03b3\\u03ad\\u03c2, \\u03c0\\u03b1\\u03c4\\u03ae\\u03c3\\u03c4\\u03b5 \\u03c4\\u03bf \\u03ba\\u03bf\\u03c5\\u03bc\\u03c0\\u03af \"\\u0388\\u03ba\\u03b4\\u03bf\\u03c3\\u03b7\" \\u03b3\\u03b9\\u03b1 \\u03bd\\u03b1 \\u03b4\\u03b7\\u03bc\\u03b9\\u03bf\\u03c5\\u03c1\\u03b3\\u03ae\\u03c3\\u03b5\\u03c4\\u03b5 \\u03c4\\u03b7\\u03bd \\u03c4\\u03b1\\u03c5\\u03c4\\u03bf\\u03c4\\u03b7\\u03c4\\u03ac \\u03c3\\u03b1\\u03c2.'),_(j.a,null,_(v.a,null,_(S.a,null,s),_(S.a,null,a))))),i=_(A.a,{qrData:this.props.qrData,DID:this.props.DID,baseUrl:this.props.baseUrl,uuid:this.props.uuid,serverSessionId:this.props.sealSession,card:r,vcSent:this.props.vcSent,sealSession:this.props.sealSession,selfForm:_(x,{onSubmit:this.submit,userError:this.props.noUserError}),formDataUploaded:this.hasRequiredAttributes});return _(m.a,null,_(v.a,null,_(S.a,null,_(g.a,{steps:t,activeNum:e}))),i,_(v.a,null,_(U.a,{baseUrl:this.props.baseUrl})))}}],[{key:\"getInitialProps\",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var s,a,i,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.reduxStore,a=t.req,s.getState().sessionData?(i=s.getState().sessionData,n=s.getState().DID,o=s.getState().sealSession):console.log(\"no server session data found\"),i&&s.dispatch(Object(f.u)(i)),n&&(s.dispatch(Object(f.c)(o)),s.dispatch(Object(f.t)(o))),e.abrupt(\"return\",{noUserError:a?a.session.error:null,sessionData:i,qrData:s.getState().qrData,vcSent:!1,sealSession:s.getState().sealSession});case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),s}(b.a.Component);t.default=Object(D.b)((function(e){return{isFetching:e.appReducer.fetching,qrData:e.appReducer.qrData,sessionData:e.appReducer.sessionData,userSelection:e.appReducer.userSelection,baseUrl:e.appReducer.baseUrl,DID:e.appReducer.DID,uuid:e.appReducer.uuid,vcSent:e.appReducer.vcSent,sealSession:e.appReducer.sealSession,eidasUri:e.appReducer.eidasUri,eidasPort:e.appReducer.eidasPort,endpoint:e.appReducer.endpoint,eidasRedirectUri:e.appReducer.eidasRedirectUri}}),(function(e){return{setE1ToSelection:function(t){e(Object(f.a)(t))},setSteps:function(t){e(Object(f.v)(t))},setEndPoint:function(t){e(Object(f.p)(endpoint))},makeConnectionRequest:function(t,s,a){e(Object(f.i)(t,s,a))},didAuthOK:function(t){e(Object(f.c)(t))},startSealSession:function(t){e(Object(f.j)(t))},startSessionAndDidAuth:function(t,s){e(Object(f.k)(t,s))},setTheSealSession:function(t){e(Object(f.t)(t))},setEidas:function(t,s){e(Object(f.n)(t,s))},setEidasRedirect:function(t){e(Object(f.m)(t))}}}))(B)}},[[\"9FFw\",0,2,7,1,3,4,5,6,8,9,10,11]]]);","map":{"version":3,"sources":["static/chunks/pages/vc/issue/e1-90048f6de6539c6e1c10.js"],"names":["_N_E","window","push","9FFw","module","exports","__webpack_require__","__NEXT_P","BEX2","__webpack_exports__","r","regenerator","regenerator_default","n","asyncToGenerator","classCallCheck","createClass","assertThisInitialized","inherits","possibleConstructorReturn","getPrototypeOf","defineProperty","react","react_default","store","Layout","es","Row","Col","Button","Card","Container","Stepper","HomeButton","IssueVCButton","PairOrCard","helpers_isMobile","Field","reduxForm","__jsx","a","createElement","AadeForm_makeInputElement","theName","text","helpText","className","htmlFor","name","component","type","AadeForm","props","handleSubmit","userError","console","log","style","marginTop","onSubmit","marginBottom","components_AadeForm","Object","form","ConnectMobile","e1_jsx","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","transport","e1_IssueE1","_React$Component","IssueE1","_super","_this","values","sessionFrag","sealSession","concat","surname","encodeURI","dateOfBirth","location","href","baseUrl","dispatch","isFetching","sessionData","proceedWithTaxisAuth","bind","hasRequiredAttributes","undefined","e1","key","value","toSelect","setE1ToSelection","DID","makeConnectionRequest","startSessionAndDidAuth","stepNumber","stepperSteps","title","qrData","steps","activeNum","uuid","serverSessionId","aadeLoginButton","variant","disabled","onClick","issueVCBut","userSelection","vcType","eidasCard","Header","Body","Title","Text","card","vcSent","selfForm","submit","noUserError","formDataUploaded","_getInitialProps","mark","_callee","_ref","reduxStore","req","userSessionData","DIDOk","wrap","_context","prev","next","getState","abrupt","session","error","stop","_x","Component","state","appReducer","fetching","eidasUri","eidasPort","endpoint","eidasRedirectUri","set","setSteps","setEndPoint","endpont","isMobile","didAuthOK","startSealSession","setTheSealSession","sessionId","setEidas","uri","data","setEidasRedirect"],"mappings":"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"},"name":"static/chunks/pages/vc/issue/e1-90048f6de6539c6e1c10.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[30],{\n\n/***/ \"9FFw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/vc/issue/e1\",\n        function () {\n          return __webpack_require__(\"BEX2\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"BEX2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"vJKn\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"rg98\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(\"H+61\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(\"UlJF\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\nvar assertThisInitialized = __webpack_require__(\"+Css\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(\"7LId\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js + 1 modules\nvar possibleConstructorReturn = __webpack_require__(\"VIvw\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\nvar getPrototypeOf = __webpack_require__(\"iHvq\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"cpVT\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"vDqi\");\n\n// EXTERNAL MODULE: ./store.js + 9 modules\nvar store = __webpack_require__(\"BXF7\");\n\n// EXTERNAL MODULE: ./components/Layout.js + 11 modules\nvar Layout = __webpack_require__(\"5Yp1\");\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 22 modules\nvar es = __webpack_require__(\"/MKj\");\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Row.js\nvar Row = __webpack_require__(\"3Z9Z\");\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Col.js\nvar Col = __webpack_require__(\"JI6e\");\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js + 1 modules\nvar Button = __webpack_require__(\"cWnB\");\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Card.js + 3 modules\nvar Card = __webpack_require__(\"6xyR\");\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(\"7vrA\");\n\n// EXTERNAL MODULE: ./components/Stepper.js\nvar Stepper = __webpack_require__(\"jCsy\");\n\n// EXTERNAL MODULE: ./components/HomeButton.js\nvar HomeButton = __webpack_require__(\"uY6F\");\n\n// EXTERNAL MODULE: ./components/IssueVCButton.js\nvar IssueVCButton = __webpack_require__(\"GTdM\");\n\n// EXTERNAL MODULE: ./components/PairOrCard.js + 1 modules\nvar PairOrCard = __webpack_require__(\"trcu\");\n\n// EXTERNAL MODULE: ./helpers/isMobile.js\nvar helpers_isMobile = __webpack_require__(\"aBEL\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/extends.js\nvar esm_extends = __webpack_require__(\"HALo\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(\"dhJC\");\n\n// EXTERNAL MODULE: ./node_modules/redux-form/es/Field.js + 10 modules\nvar Field = __webpack_require__(\"d/v1\");\n\n// EXTERNAL MODULE: ./node_modules/redux-form/es/reduxForm.js + 14 modules\nvar reduxForm = __webpack_require__(\"pJVQ\");\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js + 3 modules\nvar Checkbox = __webpack_require__(\"VmPI\");\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js + 1 modules\nvar FormControlLabel = __webpack_require__(\"ZGBi\");\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/FormControl/FormControl.js + 2 modules\nvar FormControl = __webpack_require__(\"ADg1\");\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Radio/Radio.js + 5 modules\nvar Radio = __webpack_require__(\"M4Ey\");\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/RadioGroup/RadioGroup.js + 2 modules\nvar RadioGroup = __webpack_require__(\"O6Ht\");\n\n// CONCATENATED MODULE: ./components/AadeForm.js\n\n\nvar __jsx = react_default.a.createElement;\n\n\n\n\n\n\n\n\nvar AadeForm_makeInputElement = function makeInputElement(theName, text, helpText) {\n  return __jsx(\"div\", {\n    className: \"form-group row\"\n  }, __jsx(\"label\", {\n    htmlFor: theName,\n    className: \"col-sm-2 col-form-label\"\n  }, text), __jsx(\"div\", {\n    className: \"col-sm-10\"\n  }, __jsx(Field[\"a\" /* default */], {\n    name: theName,\n    component: \"input\",\n    type: \"text\",\n    className: \"form-control\"\n  })));\n};\n\nvar AadeForm_renderCheckbox = function renderCheckbox(_ref) {\n  var input = _ref.input,\n      label = _ref.label;\n  return __jsx(\"div\", null, __jsx(FormControlLabel[\"a\" /* default */], {\n    label: label,\n    control: __jsx(Checkbox[\"a\" /* default */], {\n      checked: input.value ? true : false,\n      onChange: input.onChange\n    })\n  }));\n};\n\nvar AadeForm_radioButton = function radioButton(_ref2) {\n  var input = _ref2.input,\n      rest = Object(objectWithoutProperties[\"a\" /* default */])(_ref2, [\"input\"]);\n\n  return __jsx(FormControl[\"a\" /* default */], null, __jsx(RadioGroup[\"a\" /* default */], Object(esm_extends[\"a\" /* default */])({}, input, rest), __jsx(FormControlLabel[\"a\" /* default */], {\n    value: \"hospitalized\",\n    control: __jsx(Radio[\"a\" /* default */], null),\n    label: \"Resident at health care institution\"\n  }), __jsx(FormControlLabel[\"a\" /* default */], {\n    value: \"hospitalizedSpecific\",\n    control: __jsx(Radio[\"a\" /* default */], null),\n    label: \"Resident at mental health care institution\"\n  }), __jsx(FormControlLabel[\"a\" /* default */], {\n    value: \"monk\",\n    control: __jsx(Radio[\"a\" /* default */], null),\n    label: \"Resident at a monastery\"\n  }), __jsx(FormControlLabel[\"a\" /* default */], {\n    value: \"luxury\",\n    control: __jsx(Radio[\"a\" /* default */], null),\n    label: \"Airplane, yacht owner\"\n  }), __jsx(FormControlLabel[\"a\" /* default */], {\n    value: \"none\",\n    control: __jsx(Radio[\"a\" /* default */], null),\n    label: \"None of the above\"\n  })));\n};\n\nvar AadeForm = function AadeForm(props) {\n  var handleSubmit = props.handleSubmit,\n      userError = props.userError;\n  console.log(\"there is an error \" + userError);\n  return userError ? __jsx(\"div\", {\n    style: {\n      marginTop: \"2rem\"\n    }\n  }, \"  \", userError, \" \") : __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginTop: \"5rem\",\n      marginBottom: \"5rem\"\n    }\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"h4\", {\n    className: \"row\"\n  }, \"\\u03A0\\u03C1\\u03BF\\u03C3\\u03C9\\u03C0\\u03B9\\u03BA\\u03AC \\u03A3\\u03C4\\u03BF\\u03B9\\u03C7\\u03B5\\u03AF\\u03B1\"), AadeForm_makeInputElement(\"name\", \"Όνομα:\"), AadeForm_makeInputElement(\"surname\", \"Επώνυμο:\"), AadeForm_makeInputElement(\"dateOfBirth\", \"Ημερομηνία Γέννησης (π.χ. 01/01/77):\")), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\"\n  }, \"\\u03A5\\u03C0\\u03BF\\u03B2\\u03BF\\u03BB\\u03AE\"));\n};\n\nAadeForm = Object(reduxForm[\"a\" /* default */])({\n  // a unique name for the form\n  form: \"aade\"\n})(AadeForm);\n/* harmony default export */ var components_AadeForm = (AadeForm);\n// EXTERNAL MODULE: ./components/ConnectMobile.js\nvar ConnectMobile = __webpack_require__(\"WYw3\");\n\n// CONCATENATED MODULE: ./pages/vc/issue/e1.js\n\n\n\n\n\n\n\n\n\nvar e1_jsx = react_default.a.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Object(getPrototypeOf[\"a\" /* default */])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Object(getPrototypeOf[\"a\" /* default */])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Object(possibleConstructorReturn[\"a\" /* default */])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar transport = __webpack_require__(\"6ivx\").transport;\n/*\n  Secure flow:\n  - check in session if DID is present. This is not only the DID of the user but the whole connection response\n  - if it is not present:\n    - first display DID connection request (QR etc.). The DID response endpoint should contain the session here\n    - on response on the server, send a SSE to the front end, denoting that DID auth is completed and on the server there is the DID component\n    - Display additional datasources\n    - on VC issance request, do not display QR code etc, but send the credentials straigth to the users wallet\n\n*/\n\n\nvar e1_IssueE1 = /*#__PURE__*/function (_React$Component) {\n  Object(inherits[\"a\" /* default */])(IssueE1, _React$Component);\n\n  var _super = _createSuper(IssueE1);\n\n  function IssueE1(props) {\n    var _this;\n\n    Object(classCallCheck[\"a\" /* default */])(this, IssueE1);\n\n    _this = _super.call(this, props);\n\n    Object(defineProperty[\"a\" /* default */])(Object(assertThisInitialized[\"a\" /* default */])(_this), \"submit\", function (values) {\n      // print the form values to the console\n      // alert(values);\n      console.log(values);\n      var sessionFrag = _this.props.sealSession ? \"?session=\".concat(_this.props.sealSession, \"&name=\").concat(values.name, \"&surname=\").concat(values.surname, \"&dateOfBirth=\").concat(encodeURI(values.dateOfBirth)) : \"\";\n      window.location.href = \"\".concat(_this.props.baseUrl, \"/e1/getData\").concat(sessionFrag);\n    });\n\n    _this.dispatch = props.dispatch;\n    _this.isFetching = props.isFetching;\n    _this.sessionData = props.sessionData;\n    _this.proceedWithTaxisAuth = _this.proceedWithTaxisAuth.bind(Object(assertThisInitialized[\"a\" /* default */])(_this));\n    _this.hasRequiredAttributes = props.sessionData !== null && props.sessionData !== undefined && props.sessionData.e1 !== undefined;\n    return _this;\n  }\n\n  Object(createClass[\"a\" /* default */])(IssueE1, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.sessionData && this.props.sessionData.e1) {\n        var toSelect = [this.props.sessionData.e1];\n        this.props.setE1ToSelection(toSelect);\n      }\n\n      if (!this.props.DID) {\n        //if DID auth has not been completed\n        if (!this.props.sealSession) {\n          this.props.startSessionAndDidAuth(this.props.baseUrl, Object(helpers_isMobile[\"a\" /* default */])()); //and then makeConnectionRequest\n        } else {\n          this.props.makeConnectionRequest(this.props.sealSession, this.props.baseUrl, Object(helpers_isMobile[\"a\" /* default */])());\n        }\n      }\n    }\n  }, {\n    key: \"proceedWithTaxisAuth\",\n    value: function proceedWithTaxisAuth() {\n      var sessionFrag = this.props.sealSession ? \"?session=\".concat(this.props.sealSession) : \"\";\n      window.location.href = this.props.baseUrl === \"\" ? \"/e1/getData\".concat(sessionFrag) : \"\".concat(this.props.baseUrl, \"e1/getData\").concat(sessionFrag);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var stepNumber = !this.props.DID ? 0 : this.hasRequiredAttributes ? 2 : 1;\n      var stepperSteps = [{\n        title: \"Συνδέστε το κινητό σας\"\n      }, {\n        title: 'Ανακτήστε τα δεδομένα σας'\n      }, {\n        title: \"Έκδοση Ηλεκτρονικής Ταυτότητας\"\n      }];\n\n      if (this.props.qrData && Object(helpers_isMobile[\"a\" /* default */])() && !this.props.DID) {\n        return e1_jsx(Layout[\"a\" /* default */], null, e1_jsx(Row[\"a\" /* default */], null, e1_jsx(Col[\"a\" /* default */], null, e1_jsx(Stepper[\"a\" /* default */], {\n          steps: stepperSteps,\n          activeNum: stepNumber\n        }))), e1_jsx(ConnectMobile[\"a\" /* default */], {\n          baseUrl: this.props.baseUrl,\n          qrData: this.props.qrData,\n          DID: this.props.DID,\n          uuid: this.props.uuid,\n          serverSessionId: this.props.uuid,\n          sealSession: this.props.uuid\n        }));\n      }\n\n      var aadeLoginButton = !this.hasRequiredAttributes ? e1_jsx(Button[\"a\" /* default */], {\n        onClick: this.proceedWithTaxisAuth\n      }, \"\\u03A3\\u03CD\\u03BD\\u03B4\\u03B5\\u03C3\\u03B7 \\u03BC\\u03AD\\u03C3\\u03C9 \\u0391\\u0391\\u0394\\u0395\") : e1_jsx(Button[\"a\" /* default */], {\n        variant: \"primary\",\n        disabled: true\n      }, \"AADE login\");\n\n      var issueVCBut = e1_jsx(IssueVCButton[\"a\" /* default */], {\n        hasRequiredAttributes: this.hasRequiredAttributes // vcIssuanceEndpoint={\"/issueVCSecure\"}\n        ,\n        baseUrl: this.props.baseUrl,\n        userSelection: this.props.userSelection,\n        uuid: this.props.sealSession,\n        vcType: \"E1\"\n      });\n\n      var eidasCard = e1_jsx(Card[\"a\" /* default */], {\n        className: \"text-center\",\n        style: {\n          marginTop: \"2rem\"\n        }\n      }, e1_jsx(Card[\"a\" /* default */].Header, null, \"Issue a Verifiable Credential containing financial details from AADE\"), e1_jsx(Card[\"a\" /* default */].Body, null, e1_jsx(Card[\"a\" /* default */].Title, null, this.hasRequiredAttributes ? \"Η έκδοση της Ηλεκτρονικής σας Ταυτότητας είναι έτοιμη!\" : \"Παρακαλώ ταυτοποιηθείτε στις απαιτούμενες πηγές\"), e1_jsx(Card[\"a\" /* default */].Text, null, \"\\u039C\\u03BF\\u03BB\\u03B9\\u03C2 \\u03C4\\u03B1\\u03C5\\u03C4\\u03BF\\u03C0\\u03BF\\u03B9\\u03B7\\u03B8\\u03B5\\u03AF\\u03C4\\u03B5 \\u03BC\\u03B5 \\u03C4\\u03B9\\u03C2 \\u03B5\\u03BE\\u03BF\\u03C5\\u03C3\\u03B9\\u03BF\\u03B4\\u03BF\\u03C4\\u03B7\\u03BC\\u03AD\\u03BD\\u03B5\\u03C2 \\u03C0\\u03B7\\u03B3\\u03AD\\u03C2, \\u03C0\\u03B1\\u03C4\\u03AE\\u03C3\\u03C4\\u03B5 \\u03C4\\u03BF \\u03BA\\u03BF\\u03C5\\u03BC\\u03C0\\u03AF \\\"\\u0388\\u03BA\\u03B4\\u03BF\\u03C3\\u03B7\\\" \\u03B3\\u03B9\\u03B1 \\u03BD\\u03B1 \\u03B4\\u03B7\\u03BC\\u03B9\\u03BF\\u03C5\\u03C1\\u03B3\\u03AE\\u03C3\\u03B5\\u03C4\\u03B5 \\u03C4\\u03B7\\u03BD \\u03C4\\u03B1\\u03C5\\u03C4\\u03BF\\u03C4\\u03B7\\u03C4\\u03AC \\u03C3\\u03B1\\u03C2.\"), e1_jsx(Container[\"a\" /* default */], null, e1_jsx(Row[\"a\" /* default */], null, e1_jsx(Col[\"a\" /* default */], null, aadeLoginButton), e1_jsx(Col[\"a\" /* default */], null, issueVCBut)))));\n\n      var result = e1_jsx(PairOrCard[\"a\" /* default */], {\n        qrData: this.props.qrData,\n        DID: this.props.DID,\n        baseUrl: this.props.baseUrl,\n        uuid: this.props.uuid,\n        serverSessionId: this.props.sealSession,\n        card: eidasCard,\n        vcSent: this.props.vcSent,\n        sealSession: this.props.sealSession,\n        selfForm: e1_jsx(components_AadeForm, {\n          onSubmit: this.submit,\n          userError: this.props.noUserError\n        }),\n        formDataUploaded: this.hasRequiredAttributes\n      });\n\n      return e1_jsx(Layout[\"a\" /* default */], null, e1_jsx(Row[\"a\" /* default */], null, e1_jsx(Col[\"a\" /* default */], null, e1_jsx(Stepper[\"a\" /* default */], {\n        steps: stepperSteps,\n        activeNum: stepNumber\n      }))), result, e1_jsx(Row[\"a\" /* default */], null, e1_jsx(HomeButton[\"a\" /* default */], {\n        baseUrl: this.props.baseUrl\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee(_ref) {\n        var reduxStore, req, userSessionData, DIDOk, sealSession, baseUrl;\n        return regenerator_default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                reduxStore = _ref.reduxStore, req = _ref.req;\n\n                if (false) {} else {\n                  if (reduxStore.getState().sessionData) {\n                    userSessionData = reduxStore.getState().sessionData;\n                    DIDOk = reduxStore.getState().DID; //if ther is sessionData then there should be a session as well\n\n                    sealSession = reduxStore.getState().sealSession;\n                  } else {\n                    console.log(\"no server session data found\");\n                  }\n                } //this way the userSessionData gets set in all settings\n\n\n                if (userSessionData) {\n                  reduxStore.dispatch(Object(store[\"u\" /* setSessionData */])(userSessionData));\n                }\n\n                if (DIDOk) {\n                  reduxStore.dispatch(Object(store[\"c\" /* completeDIDAuth */])(sealSession));\n                  reduxStore.dispatch(Object(store[\"t\" /* setSealSession */])(sealSession));\n                } //returned value here is getting mered with the mapstatetoprops\n                // mapstatetoprops overrides these values if they match\n\n\n                return _context.abrupt(\"return\", {\n                  noUserError: req ? req.session.error : null,\n                  sessionData: userSessionData,\n                  qrData: reduxStore.getState().qrData,\n                  vcSent: false,\n                  sealSession: reduxStore.getState().sealSession\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return IssueE1;\n}(react_default.a.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    isFetching: state.appReducer.fetching,\n    qrData: state.appReducer.qrData,\n    sessionData: state.appReducer.sessionData,\n    userSelection: state.appReducer.userSelection,\n    // the attributes selected by the user to be included in a VC,\n    baseUrl: state.appReducer.baseUrl,\n    DID: state.appReducer.DID,\n    // serverSessionId: state.serverSessionId,\n    uuid: state.appReducer.uuid,\n    vcSent: state.appReducer.vcSent,\n    sealSession: state.appReducer.sealSession,\n    eidasUri: state.appReducer.eidasUri,\n    eidasPort: state.appReducer.eidasPort,\n    endpoint: state.appReducer.endpoint,\n    eidasRedirectUri: state.appReducer.eidasRedirectUri\n  };\n}\n\nvar e1_mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setE1ToSelection: function setE1ToSelection(set) {\n      dispatch(Object(store[\"a\" /* addSetToSelection */])(set));\n    },\n    setSteps: function setSteps(steps) {\n      dispatch(Object(store[\"v\" /* setStepperSteps */])(steps));\n    },\n    setEndPoint: function setEndPoint(endpont) {\n      dispatch(Object(store[\"p\" /* setEndpoint */])(endpoint));\n    },\n    makeConnectionRequest: function makeConnectionRequest(sealSession, baseUrl, isMobile) {\n      dispatch(Object(store[\"i\" /* makeOnlyConnectionRequest */])(sealSession, baseUrl, isMobile));\n    },\n    didAuthOK: function didAuthOK(uuid) {\n      dispatch(Object(store[\"c\" /* completeDIDAuth */])(uuid));\n    },\n    startSealSession: function startSealSession(baseUrl) {\n      dispatch(Object(store[\"j\" /* makeSealSession */])(baseUrl));\n    },\n    startSessionAndDidAuth: function startSessionAndDidAuth(baseUrl, isMobile) {\n      dispatch(Object(store[\"k\" /* makeSessionWithDIDConnecetionRequest */])(baseUrl, isMobile));\n    },\n    setTheSealSession: function setTheSealSession(sessionId) {\n      dispatch(Object(store[\"t\" /* setSealSession */])(sessionId));\n    },\n    setEidas: function setEidas(uri, data) {\n      dispatch(Object(store[\"n\" /* setEidasUriPort */])(uri, data));\n    },\n    setEidasRedirect: function setEidasRedirect(uri) {\n      dispatch(Object(store[\"m\" /* setEidasRedirectUri */])(uri));\n    }\n  };\n};\n\n/* harmony default export */ var e1 = __webpack_exports__[\"default\"] = (Object(es[\"b\" /* connect */])(mapStateToProps, e1_mapDispatchToProps)(e1_IssueE1));\n\n/***/ })\n\n},[[\"9FFw\",0,2,7,1,3,4,5,6,8,9,10,11]]]);","inputSourceMap":{"version":3,"sources":["/home/ni/code/js/sbchain-issuer/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fvc%2Fissue%2Fe1&absolutePagePath=private-next-pages%2Fvc%2Fissue%2Fe1.js!","/home/ni/code/js/sbchain-issuer/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/home/ni/code/js/sbchain-issuer/components/AadeForm.js","/home/ni/code/js/sbchain-issuer/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/home/ni/code/js/sbchain-issuer/pages/vc/issue/e1.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/vc/issue/e1\",\n        function () {\n          return require(\"private-next-pages/vc/issue/e1.js\");\n        }\n      ]);\n    ","import _extends from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\n\nvar makeInputElement = function makeInputElement(theName, text, helpText) {\n  return __jsx(\"div\", {\n    className: \"form-group row\"\n  }, __jsx(\"label\", {\n    htmlFor: theName,\n    className: \"col-sm-2 col-form-label\"\n  }, text), __jsx(\"div\", {\n    className: \"col-sm-10\"\n  }, __jsx(Field, {\n    name: theName,\n    component: \"input\",\n    type: \"text\",\n    className: \"form-control\"\n  })));\n};\n\nvar renderCheckbox = function renderCheckbox(_ref) {\n  var input = _ref.input,\n      label = _ref.label;\n  return __jsx(\"div\", null, __jsx(FormControlLabel, {\n    label: label,\n    control: __jsx(Checkbox, {\n      checked: input.value ? true : false,\n      onChange: input.onChange\n    })\n  }));\n};\n\nvar radioButton = function radioButton(_ref2) {\n  var input = _ref2.input,\n      rest = _objectWithoutProperties(_ref2, [\"input\"]);\n\n  return __jsx(FormControl, null, __jsx(RadioGroup, _extends({}, input, rest), __jsx(FormControlLabel, {\n    value: \"hospitalized\",\n    control: __jsx(Radio, null),\n    label: \"Resident at health care institution\"\n  }), __jsx(FormControlLabel, {\n    value: \"hospitalizedSpecific\",\n    control: __jsx(Radio, null),\n    label: \"Resident at mental health care institution\"\n  }), __jsx(FormControlLabel, {\n    value: \"monk\",\n    control: __jsx(Radio, null),\n    label: \"Resident at a monastery\"\n  }), __jsx(FormControlLabel, {\n    value: \"luxury\",\n    control: __jsx(Radio, null),\n    label: \"Airplane, yacht owner\"\n  }), __jsx(FormControlLabel, {\n    value: \"none\",\n    control: __jsx(Radio, null),\n    label: \"None of the above\"\n  })));\n};\n\nvar AadeForm = function AadeForm(props) {\n  var handleSubmit = props.handleSubmit,\n      userError = props.userError;\n  console.log(\"there is an error \" + userError);\n  return userError ? __jsx(\"div\", {\n    style: {\n      marginTop: \"2rem\"\n    }\n  }, \"  \", userError, \" \") : __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginTop: \"5rem\",\n      marginBottom: \"5rem\"\n    }\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"h4\", {\n    className: \"row\"\n  }, \"\\u03A0\\u03C1\\u03BF\\u03C3\\u03C9\\u03C0\\u03B9\\u03BA\\u03AC \\u03A3\\u03C4\\u03BF\\u03B9\\u03C7\\u03B5\\u03AF\\u03B1\"), makeInputElement(\"name\", \"Όνομα:\"), makeInputElement(\"surname\", \"Επώνυμο:\"), makeInputElement(\"dateOfBirth\", \"Ημερομηνία Γέννησης (π.χ. 01/01/77):\")), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\"\n  }, \"\\u03A5\\u03C0\\u03BF\\u03B2\\u03BF\\u03BB\\u03AE\"));\n};\n\nAadeForm = reduxForm({\n  // a unique name for the form\n  form: \"aade\"\n})(AadeForm);\nexport default AadeForm;","import _regeneratorRuntime from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport { setSessionData, makeOnlyConnectionRequest, addSetToSelection, setStepperSteps, setEndpoint, setBaseUrl // setServerSessionId,\n, completeDIDAuth, makeSealSession, makeSessionWithDIDConnecetionRequest, setSealSession, setEidasUriPort, setEidasRedirectUri } from \"../../../store\";\nimport Layout from \"../../../components/Layout\";\nimport { connect } from \"react-redux\";\nimport { Button, Row, Col, Card, Container } from \"react-bootstrap\";\nimport MyStepper from \"../../../components/Stepper\";\nimport HomeButton from \"../../../components/HomeButton\";\nimport IssueVCButton from \"../../../components/IssueVCButton\";\nimport PairOrCard from \"../../../components/PairOrCard\";\nimport isMobile from \"../../../helpers/isMobile\";\nimport AadeForm from \"../../../components/AadeForm\";\nimport ConnectMobile from \"../../../components/ConnectMobile\";\n\nvar transport = require(\"uport-transports\").transport;\n/*\n  Secure flow:\n  - check in session if DID is present. This is not only the DID of the user but the whole connection response\n  - if it is not present:\n    - first display DID connection request (QR etc.). The DID response endpoint should contain the session here\n    - on response on the server, send a SSE to the front end, denoting that DID auth is completed and on the server there is the DID component\n    - Display additional datasources\n    - on VC issance request, do not display QR code etc, but send the credentials straigth to the users wallet\n\n*/\n\n\nvar IssueE1 = /*#__PURE__*/function (_React$Component) {\n  _inherits(IssueE1, _React$Component);\n\n  var _super = _createSuper(IssueE1);\n\n  function IssueE1(props) {\n    var _this;\n\n    _classCallCheck(this, IssueE1);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"submit\", function (values) {\n      // print the form values to the console\n      // alert(values);\n      console.log(values);\n      var sessionFrag = _this.props.sealSession ? \"?session=\".concat(_this.props.sealSession, \"&name=\").concat(values.name, \"&surname=\").concat(values.surname, \"&dateOfBirth=\").concat(encodeURI(values.dateOfBirth)) : \"\";\n      window.location.href = \"\".concat(_this.props.baseUrl, \"/e1/getData\").concat(sessionFrag);\n    });\n\n    _this.dispatch = props.dispatch;\n    _this.isFetching = props.isFetching;\n    _this.sessionData = props.sessionData;\n    _this.proceedWithTaxisAuth = _this.proceedWithTaxisAuth.bind(_assertThisInitialized(_this));\n    _this.hasRequiredAttributes = props.sessionData !== null && props.sessionData !== undefined && props.sessionData.e1 !== undefined;\n    return _this;\n  }\n\n  _createClass(IssueE1, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.sessionData && this.props.sessionData.e1) {\n        var toSelect = [this.props.sessionData.e1];\n        this.props.setE1ToSelection(toSelect);\n      }\n\n      if (!this.props.DID) {\n        //if DID auth has not been completed\n        if (!this.props.sealSession) {\n          this.props.startSessionAndDidAuth(this.props.baseUrl, isMobile()); //and then makeConnectionRequest\n        } else {\n          this.props.makeConnectionRequest(this.props.sealSession, this.props.baseUrl, isMobile());\n        }\n      }\n    }\n  }, {\n    key: \"proceedWithTaxisAuth\",\n    value: function proceedWithTaxisAuth() {\n      var sessionFrag = this.props.sealSession ? \"?session=\".concat(this.props.sealSession) : \"\";\n      window.location.href = this.props.baseUrl === \"\" ? \"/e1/getData\".concat(sessionFrag) : \"\".concat(this.props.baseUrl, \"e1/getData\").concat(sessionFrag);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var stepNumber = !this.props.DID ? 0 : this.hasRequiredAttributes ? 2 : 1;\n      var stepperSteps = [{\n        title: \"Συνδέστε το κινητό σας\"\n      }, {\n        title: 'Ανακτήστε τα δεδομένα σας'\n      }, {\n        title: \"Έκδοση Ηλεκτρονικής Ταυτότητας\"\n      }];\n\n      if (this.props.qrData && isMobile() && !this.props.DID) {\n        return __jsx(Layout, null, __jsx(Row, null, __jsx(Col, null, __jsx(MyStepper, {\n          steps: stepperSteps,\n          activeNum: stepNumber\n        }))), __jsx(ConnectMobile, {\n          baseUrl: this.props.baseUrl,\n          qrData: this.props.qrData,\n          DID: this.props.DID,\n          uuid: this.props.uuid,\n          serverSessionId: this.props.uuid,\n          sealSession: this.props.uuid\n        }));\n      }\n\n      var aadeLoginButton = !this.hasRequiredAttributes ? __jsx(Button, {\n        onClick: this.proceedWithTaxisAuth\n      }, \"\\u03A3\\u03CD\\u03BD\\u03B4\\u03B5\\u03C3\\u03B7 \\u03BC\\u03AD\\u03C3\\u03C9 \\u0391\\u0391\\u0394\\u0395\") : __jsx(Button, {\n        variant: \"primary\",\n        disabled: true\n      }, \"AADE login\");\n\n      var issueVCBut = __jsx(IssueVCButton, {\n        hasRequiredAttributes: this.hasRequiredAttributes // vcIssuanceEndpoint={\"/issueVCSecure\"}\n        ,\n        baseUrl: this.props.baseUrl,\n        userSelection: this.props.userSelection,\n        uuid: this.props.sealSession,\n        vcType: \"E1\"\n      });\n\n      var eidasCard = __jsx(Card, {\n        className: \"text-center\",\n        style: {\n          marginTop: \"2rem\"\n        }\n      }, __jsx(Card.Header, null, \"Issue a Verifiable Credential containing financial details from AADE\"), __jsx(Card.Body, null, __jsx(Card.Title, null, this.hasRequiredAttributes ? \"Η έκδοση της Ηλεκτρονικής σας Ταυτότητας είναι έτοιμη!\" : \"Παρακαλώ ταυτοποιηθείτε στις απαιτούμενες πηγές\"), __jsx(Card.Text, null, \"\\u039C\\u03BF\\u03BB\\u03B9\\u03C2 \\u03C4\\u03B1\\u03C5\\u03C4\\u03BF\\u03C0\\u03BF\\u03B9\\u03B7\\u03B8\\u03B5\\u03AF\\u03C4\\u03B5 \\u03BC\\u03B5 \\u03C4\\u03B9\\u03C2 \\u03B5\\u03BE\\u03BF\\u03C5\\u03C3\\u03B9\\u03BF\\u03B4\\u03BF\\u03C4\\u03B7\\u03BC\\u03AD\\u03BD\\u03B5\\u03C2 \\u03C0\\u03B7\\u03B3\\u03AD\\u03C2, \\u03C0\\u03B1\\u03C4\\u03AE\\u03C3\\u03C4\\u03B5 \\u03C4\\u03BF \\u03BA\\u03BF\\u03C5\\u03BC\\u03C0\\u03AF \\\"\\u0388\\u03BA\\u03B4\\u03BF\\u03C3\\u03B7\\\" \\u03B3\\u03B9\\u03B1 \\u03BD\\u03B1 \\u03B4\\u03B7\\u03BC\\u03B9\\u03BF\\u03C5\\u03C1\\u03B3\\u03AE\\u03C3\\u03B5\\u03C4\\u03B5 \\u03C4\\u03B7\\u03BD \\u03C4\\u03B1\\u03C5\\u03C4\\u03BF\\u03C4\\u03B7\\u03C4\\u03AC \\u03C3\\u03B1\\u03C2.\"), __jsx(Container, null, __jsx(Row, null, __jsx(Col, null, aadeLoginButton), __jsx(Col, null, issueVCBut)))));\n\n      var result = __jsx(PairOrCard, {\n        qrData: this.props.qrData,\n        DID: this.props.DID,\n        baseUrl: this.props.baseUrl,\n        uuid: this.props.uuid,\n        serverSessionId: this.props.sealSession,\n        card: eidasCard,\n        vcSent: this.props.vcSent,\n        sealSession: this.props.sealSession,\n        selfForm: __jsx(AadeForm, {\n          onSubmit: this.submit,\n          userError: this.props.noUserError\n        }),\n        formDataUploaded: this.hasRequiredAttributes\n      });\n\n      return __jsx(Layout, null, __jsx(Row, null, __jsx(Col, null, __jsx(MyStepper, {\n        steps: stepperSteps,\n        activeNum: stepNumber\n      }))), result, __jsx(Row, null, __jsx(HomeButton, {\n        baseUrl: this.props.baseUrl\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var reduxStore, req, userSessionData, DIDOk, sealSession, baseUrl;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                reduxStore = _ref.reduxStore, req = _ref.req;\n\n                if (false) {\n                  userSessionData = req.session.userData;\n                  reduxStore.dispatch(setEndpoint(req.session.enpoint));\n                  baseUrl = req.session.baseUrl ? \"/\".concat(req.session.baseUrl, \"/\") : \"\";\n                  reduxStore.dispatch(setBaseUrl(baseUrl));\n                  DIDOk = req.session.DID;\n                  sealSession = req.session.sealSession;\n                  console.log(\"e1.js:: in the server the seal session is:: \".concat(req.session.sealSession));\n                } else {\n                  if (reduxStore.getState().sessionData) {\n                    userSessionData = reduxStore.getState().sessionData;\n                    DIDOk = reduxStore.getState().DID; //if ther is sessionData then there should be a session as well\n\n                    sealSession = reduxStore.getState().sealSession;\n                  } else {\n                    console.log(\"no server session data found\");\n                  }\n                } //this way the userSessionData gets set in all settings\n\n\n                if (userSessionData) {\n                  reduxStore.dispatch(setSessionData(userSessionData));\n                }\n\n                if (DIDOk) {\n                  reduxStore.dispatch(completeDIDAuth(sealSession));\n                  reduxStore.dispatch(setSealSession(sealSession));\n                } //returned value here is getting mered with the mapstatetoprops\n                // mapstatetoprops overrides these values if they match\n\n\n                return _context.abrupt(\"return\", {\n                  noUserError: req ? req.session.error : null,\n                  sessionData: userSessionData,\n                  qrData: reduxStore.getState().qrData,\n                  vcSent: false,\n                  sealSession: reduxStore.getState().sealSession\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return IssueE1;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    isFetching: state.appReducer.fetching,\n    qrData: state.appReducer.qrData,\n    sessionData: state.appReducer.sessionData,\n    userSelection: state.appReducer.userSelection,\n    // the attributes selected by the user to be included in a VC,\n    baseUrl: state.appReducer.baseUrl,\n    DID: state.appReducer.DID,\n    // serverSessionId: state.serverSessionId,\n    uuid: state.appReducer.uuid,\n    vcSent: state.appReducer.vcSent,\n    sealSession: state.appReducer.sealSession,\n    eidasUri: state.appReducer.eidasUri,\n    eidasPort: state.appReducer.eidasPort,\n    endpoint: state.appReducer.endpoint,\n    eidasRedirectUri: state.appReducer.eidasRedirectUri\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setE1ToSelection: function setE1ToSelection(set) {\n      dispatch(addSetToSelection(set));\n    },\n    setSteps: function setSteps(steps) {\n      dispatch(setStepperSteps(steps));\n    },\n    setEndPoint: function setEndPoint(endpont) {\n      dispatch(setEndpoint(endpoint));\n    },\n    makeConnectionRequest: function makeConnectionRequest(sealSession, baseUrl, isMobile) {\n      dispatch(makeOnlyConnectionRequest(sealSession, baseUrl, isMobile));\n    },\n    didAuthOK: function didAuthOK(uuid) {\n      dispatch(completeDIDAuth(uuid));\n    },\n    startSealSession: function startSealSession(baseUrl) {\n      dispatch(makeSealSession(baseUrl));\n    },\n    startSessionAndDidAuth: function startSessionAndDidAuth(baseUrl, isMobile) {\n      dispatch(makeSessionWithDIDConnecetionRequest(baseUrl, isMobile));\n    },\n    setTheSealSession: function setTheSealSession(sessionId) {\n      dispatch(setSealSession(sessionId));\n    },\n    setEidas: function setEidas(uri, data) {\n      dispatch(setEidasUriPort(uri, data));\n    },\n    setEidasRedirect: function setEidasRedirect(uri) {\n      dispatch(setEidasRedirectUri(uri));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(IssueE1);"]}}